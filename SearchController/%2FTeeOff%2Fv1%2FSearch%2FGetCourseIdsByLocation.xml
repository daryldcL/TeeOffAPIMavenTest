<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="360ec5d6-951c-4745-a99c-f8ad5c71cbff" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="/TeeOff/v1/Search/GetCourseIdsByLocation" searchProperties="true" timeout="0" maxResults="0" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="360ec5d6-951c-4745-a99c-f8ad5c71cbfffileName">%2FTeeOff%2Fv1%2FSearch%2FGetCourseIdsByLocation</con:setting></con:settings><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="restrequest" name="Test Request: GetCourseIdsByLocation" id="4f385b4d-3ac9-42aa-9f8d-db5e7d9b53aa"><con:settings/><con:config service="OpenTee.ExternalApi" resourcePath="/TeeOff/v1/Search/GetCourseIdsByLocation" methodName="SearchController_GetCourseIdsByLocation" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Test Request: GetCourseIdsByLocation" id="f0c02c2d-dcae-4248-8f29-038e8b2e22b0" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://dev-api.opentee.com</con:endpoint><con:request/><con:originalUri>https://dev-api.opentee.com/TeeOff/v1/Search/GetCourseIdsByLocation</con:originalUri><con:assertion type="XPath Match" id="a758bdd8-03a2-488f-a134-e4f5df421b66" name="Success"><con:configuration><path>declare namespace ns1='https://dev-api.opentee.com/TeeOff/v1/Search/GetCourseIdsByLocation';
//ns1:Response[1]/ns1:Success[1]</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="9f68db29-7c76-461b-b288-fef8616e76ec" name="Data Count > 0"><con:configuration><path>$['Data']</path><content>134</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>test</con:username><con:password>test</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="latitude" value="33.7345"/>
  <con:entry key="longitude" value="-111.68"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Test Request: GetCourseIdsByLocation (No Results)" id="9de65f56-b619-4291-a7ff-2b3aab695ad1"><con:settings/><con:config service="OpenTee.ExternalApi" resourcePath="/TeeOff/v1/Search/GetCourseIdsByLocation" methodName="SearchController_GetCourseIdsByLocation" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Test Request: GetCourseIdsByLocation (No Results)" id="f0c02c2d-dcae-4248-8f29-038e8b2e22b0" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://dev-api.opentee.com</con:endpoint><con:request/><con:originalUri>https://dev-api.opentee.com/TeeOff/v1/Search/GetCourseIdsByLocation</con:originalUri><con:assertion type="XPath Match" id="a758bdd8-03a2-488f-a134-e4f5df421b66" name="Success"><con:configuration><path>declare namespace ns1='https://dev-api.opentee.com/TeeOff/v1/Search/GetCourseIdsByLocation';
//ns1:Response[1]/ns1:Success[1]</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="9f68db29-7c76-461b-b288-fef8616e76ec" name="Data Count is 0"><con:configuration><path>$['Data']</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>test</con:username><con:password>test</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="latitude" value="22"/>
  <con:entry key="longitude" value="1"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Test Request: GetCourseIdsByLocation (Empty Query)" id="fd4bf631-2b63-42d6-8ffb-6df1e9027833"><con:settings/><con:config service="OpenTee.ExternalApi" resourcePath="/TeeOff/v1/Search/GetCourseIdsByLocation" methodName="SearchController_GetCourseIdsByLocation" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Test Request: GetCourseIdsByLocation (Empty Query)" id="f0c02c2d-dcae-4248-8f29-038e8b2e22b0" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://dev-api.opentee.com</con:endpoint><con:request/><con:originalUri>https://dev-api.opentee.com/TeeOff/v1/Search/GetCourseIdsByLocation</con:originalUri><con:assertion type="JsonPath Count" id="9f68db29-7c76-461b-b288-fef8616e76ec" name="Data Count is 0"><con:configuration><path>$['Data']</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="2fbf2972-4d6d-4f08-9137-42d0e8a5be94" name="The request is invalid."><con:configuration><path>declare namespace ns1='https://dev-api.opentee.com/TeeOff/v1/Search/GetCourseIdsByLocation';
//ns1:Fault[1]/ns1:Message[1]</path><content>The request is invalid.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>test</con:username><con:password>test</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Test Request: GetCourseIdsByLocation (setting distanceInMiles)" id="6dcd4117-3fdd-4aea-944c-63b9e40b1d0c"><con:settings/><con:config service="OpenTee.ExternalApi" resourcePath="/TeeOff/v1/Search/GetCourseIdsByLocation" methodName="SearchController_GetCourseIdsByLocation" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Test Request: GetCourseIdsByLocation (setting distanceInMiles)" id="f0c02c2d-dcae-4248-8f29-038e8b2e22b0" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://dev-api.opentee.com</con:endpoint><con:request/><con:originalUri>https://dev-api.opentee.com/TeeOff/v1/Search/GetCourseIdsByLocation</con:originalUri><con:assertion type="XPath Match" id="a758bdd8-03a2-488f-a134-e4f5df421b66" name="Success"><con:configuration><path>declare namespace ns1='https://dev-api.opentee.com/TeeOff/v1/Search/GetCourseIdsByLocation';
//ns1:Response[1]/ns1:Success[1]</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="9f68db29-7c76-461b-b288-fef8616e76ec" name="Data Count > 0"><con:configuration><path>$['Data']</path><content>15</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>test</con:username><con:password>test</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="distanceInMiles" value="15"/>
  <con:entry key="latitude" value="33.7345"/>
  <con:entry key="longitude" value="-111.68"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: check that result count is &lt; than no distance set" id="83085906-22e5-40fc-8048-4613e2ef2824"><con:settings/><con:config><script>import groovy.json.JsonSlurper


def jsonResp = context.expand( '${Test Request: GetCourseIdsByLocation#Response#$[\'Data\']}' )
def jsonElements = new JsonSlurper().parseText(jsonResp)

def response = context.expand( '${Test Request: GetCourseIdsByLocation (setting distanceInMiles)#Response#$[\'Data\']}' )
def jsonElements2 = new JsonSlurper().parseText(response)

log.info jsonElements.size().toString()
log.info jsonElements2.size().toString()

assert jsonElements.size() > jsonElements2.size()

</script></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase>